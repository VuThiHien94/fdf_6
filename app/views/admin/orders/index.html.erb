<% provide :title, t("admin.orders.allorders") %>
<h1><%= t "admin.orders.allorders" %></h1>

<table class="table table-hover">
  <thead>
    <tr>
      <th><%= t "order.username" %></th>
      <th><%= t "order.total" %></th>
      <th><%= t "order.payment" %></th>
      <th><%= t "order.status" %></th>
      <th><%= t "order.delete" %></th>
    </tr>
  </thead>
  <tbody>
    <% @orders.each do |order| %>
      <tr id="order-<%= order.id %>">
        <td>
          <%= link_to order.user.name, order.user %>
        </td>
        <td>
          <%= order.total_pay %>
        </td>
        <td>
          <%= order.payment %>
        </td>
        <td>
          <div class="btn-group" role="group" aria-label="...">
            <div class="btn-group" role="group">
              <button type="button" class="btn btn-warning"
                <%= disabled="disabled" %>>
                <%= t "admin.orders.ordered" %>
              </button>
            </div>
            <div class="btn-group" role="group">
              <% if order.delivering? %>
                <button type="button" class="btn btn-primary" disabled="disabled">
                  <%= t "admin.orders.delivering" %>
                </button>
              <% else %>
                <%= form_for [:admin, order] do |f| %>
                  <%= f.hidden_field :status, value: "delivering" %>
                  <%= f.submit t("admin.orders.delivering"), class: "btn btn-primary" %>
                  <%= render "shared/error_messages", object: f.object %>
                <% end %>
              <% end %>
            </div>
            <div class="btn-group" role="group">
              <% if order.delivered? %>
                <button type="button" class="btn btn-success" disabled="disabled">
                  <%= t "admin.orders.delivered" %>
                </button>
              <% else %>
                <%= form_for [:admin, order] do |f| %>
                  <%= f.hidden_field :status, value: "delivered" %>
                  <%= f.submit t("admin.orders.delivered"), class: "btn btn-success" %>
                  <%= render "shared/error_messages", object: f.object %>
                <% end %>
              <% end %>
            </div>
          </div>
        </td>
        <td>
          <%= link_to t(:delete), [:admin, order], method: :delete, data:
            {confirm: t(:areyousure)}, class: "btn btn-danger" %>
        </td>
      </tr>
    <% end %>
  </tbody>
</table>
<%= will_paginate %>
